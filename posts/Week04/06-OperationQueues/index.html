<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Mobile Application Development for the iOS Platform"/><link rel="canonical" href="https://hococoder.com/posts/Week04/06-OperationQueues"/><meta name="twitter:url" content="https://hococoder.com/posts/Week04/06-OperationQueues"/><meta name="og:url" content="https://hococoder.com/posts/Week04/06-OperationQueues"/><title>Week 4 - Operation Queues | Mobile Application Development for the iOS Platform</title><meta name="twitter:title" content="Week 4 - Operation Queues | Mobile Application Development for the iOS Platform"/><meta name="og:title" content="Week 4 - Operation Queues | Mobile Application Development for the iOS Platform"/><meta name="description" content="A description of my first post."/><meta name="twitter:description" content="A description of my first post."/><meta name="og:description" content="A description of my first post."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><link rel="stylesheet" href="../../../styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Mobile Application Development for the iOS Platform"/></head><body><header><div class="wrapper"><a class="site-name" href="/">Mobile Application Development for the iOS Platform</a><nav><ul><li><a href="/epp_605_687_spring_2023/posts/Intro/About Me">AboutMe</a></li><li><a href="/epp_605_687_spring_2023/posts/Intro/Example App">ExampleApp</a></li><li><a href="/epp_605_687_spring_2023/posts/Week00/00-Week00Overview">Week0</a></li><li><a href="/epp_605_687_spring_2023/posts/Week01/00-Week01Overview">Week1</a></li><li><a href="/epp_605_687_spring_2023/posts/Week02/00-Week02Overview">Week2</a></li><li><a href="/epp_605_687_spring_2023/posts/Week03/00-Week03Overview">Week3</a></li><li><a href="/epp_605_687_spring_2023/posts/Week04/00-Week04Overview">Week4</a></li><li><a href="/epp_605_687_spring_2023/posts/Week05/00-Week05Overview">Week5</a></li><li><a href="/epp_605_687_spring_2023/posts/Week06/00-Week06Overview">Week6</a></li><li><a href="/epp_605_687_spring_2023/posts/Week07/00-Week07Overview">Week7</a></li><li><a href="/epp_605_687_spring_2023/posts/Week08/00-Week08Overview">Week8</a></li><li><a href="/epp_605_687_spring_2023/posts/Week09/00-Week09Overview">Week9</a></li><li><a href="/epp_605_687_spring_2023/posts/Week10/00-Week10Overview">Week10</a></li><li><a href="/epp_605_687_spring_2023/posts/Week11/00-Week11Overview">Week11</a></li><li><a href="/epp_605_687_spring_2023/posts/Week12/00-Week12Overview">Week12</a></li><li><a href="/epp_605_687_spring_2023/posts/Week13/00-Week13Overview">Week13</a></li><li><a href="/epp_605_687_spring_2023/posts/Week14/00-Week14Overview">Week14</a></li></ul></nav></div></header><div class="wrapper"><h1>Week 4 - Operation Queues</h1><p style="float: left">Previous:  <A HREF="../05-GrandCentralDispatch/index.html">Grand Central Dispatch</A></p><p style="float: right">Next:  <A HREF="../07-GCDQueuesExample/index.html" class="nextModule">GCD and Queues Example</A></p><BR/><BR/><h2>Overview</h2><center> <iframe width="1280" height="720" src="https://cdnapisec.kaltura.com/html5/html5lib/v2.81.2/mwEmbedFrame.php/p/1458241/uiconf_id/14487351/entry_id/1_phlkd8mp?wid=_1458241&iframeembed=true&playerId=kaltura_player&entry_id=1_phlkd8mp&flashvars[localizationCode]=en&amp;flashvars[leadWithHTML5]=true&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[mediaProxy.preferedFlavorBR]=2500&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;flashvars[EmbedPlayer.NotPlayableDownloadLink]=true;&wid=1_abkvs1gz"allowfullscreen webkitallowfullscreen mozAllowFullScreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player">
  </iframe>
</center><h2>Operation Queues</h2><p>An alternative to dispatch queues are <code>OperationQueue</code>s. Under the hood they are the equivalent of a concurrent dispatch queue. However, <code>OperationQueue</code>s aren’t FIFOs. You can set dependencies between tasks, as well as establish priorities for their execution. Tasks are encapsulated in <code>Operation</code>s.</p><p><code>Operation</code>s contain the tasks that are submitted to the queues. The <code>Operation</code> class is abstract, so you will need to define a custom implementation to perform the exact task you need for your app. When you do that, you can define several properties of the <code>Operation</code>, which we’ll discuss next.</p><h3>Priorities</h3><p><code>Operation</code>s can have a priority - ranging from <code>veryLow</code> to <code>veryHigh</code>. Priority impacts the placement in the <code>OperationQueue</code>, hence impacting when it gets executed relative to the other tasks.</p><ul><li><code>veryLow</code></li><li><code>low</code></li><li><code>normal</code></li><li><code>high</code></li><li><code>veryHigh</code></li></ul><h3>Quality of Service (QoS)</h3><p>Certain tasks may need more resources than others, and you can give the OS a hint as to how much your task will need by defining the operation’s Quality of Service, or QoS. CPU, network and disk resources are reflected in your choice.</p><ul><li><code>userInteractive</code> describes tasks that involve handling UI events or drawing on screen.</li><li><code>userInitiated</code> describes a task that is requested by the user, and would like an immediate return of data from the task.</li><li><code>utility</code> describes a task that is either user or system initiated, and it’s response is not immediately needed.</li><li><code>background</code> tasks are not user initiated, or they are invisible to the user.</li><li><code>default</code> is used if you don’t specify another QoS attribute to use.</li></ul><h3>Dependency</h3><p><code>OperationQueue</code>s can order thread execution based on any dependencies you setup between the operations. This comes in handy when you want to break up your tasks into smaller chunks, each of which has a clear dependency (for example, this task must absolutely finish before the next one starts). If you write the following, it means that operation 1 must be finished before operation 2 can begin.</p><pre><code>operation2.<span class="call">addDependency</span>(operation1)'
</code></pre><h3>Completion Blocks</h3><p><code>Operation</code>s can perform blocks of code defined in their <code>completionBlock</code> property once they have finished processing. An example is shown below:</p><pre><code><span class="keyword">let</span> operation = <span class="type">Operation</span>()
operation.<span class="property">completionBlock</span> = { <span class="call">print</span>(<span class="string">"Completed"</span>) }
</code></pre><h2>GCD or OperationQueues - Which to use?</h2><p>So, which one to use? If you’re doing a one-time calculation, or trying to speed up an existing method, use a lightweight GCD dispatch call rather than setting up an <code>Operation</code>. If your tasks have dependencies, priorities, require a specific quality of service, or need to have the option of being cancelled, use an <code>Operation</code>. Remember though - they aren’t mutually exclusive - you may use both types in your app!</p><p>In the next module, we'll look at an example.</p><p style="float: left">Previous:  <A HREF="../05-GrandCentralDispatch/index.html">Grand Central Dispatch</A></p><p style="float: right">Next:  <A HREF="../07-GCDQueuesExample/index.html" class="nextModule">GCD and Queues Example</A></p></div><footer><p>Generated with ❤️ using <a href="https://github.com/johnsundell/publish">Publish</a></p><p>© 2022-2023 Josh Steele (rsteele3@jhu.edu) <a href="mailto:"(rsteele3@jhu.edu)""></a></p><p>Last updated January 23, 2023 at 4:41 PM</p><p><a href="https://twitter.com/hococoder" target="_blank">My Twitter</a> | <a href="https://github.com/hococoder" target="_blank">My GitHub</a> | <a href="https://ep.jhu.edu" target="_blank">Whiting School EPP</a> | <a href="https://blackboard.jhu.edu" target="_blank">JHU Blackboard</a></p></footer></body></html>