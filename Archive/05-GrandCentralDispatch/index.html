<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Mobile Application Development for the iOS Platform"/><link rel="canonical" href="https://hococoder.com/Archive/05-GrandCentralDispatch"/><meta name="twitter:url" content="https://hococoder.com/Archive/05-GrandCentralDispatch"/><meta name="og:url" content="https://hococoder.com/Archive/05-GrandCentralDispatch"/><title>Week 4 - Grand Central Dispatch | Mobile Application Development for the iOS Platform</title><meta name="twitter:title" content="Week 4 - Grand Central Dispatch | Mobile Application Development for the iOS Platform"/><meta name="og:title" content="Week 4 - Grand Central Dispatch | Mobile Application Development for the iOS Platform"/><meta name="description" content="A description of my first post."/><meta name="twitter:description" content="A description of my first post."/><meta name="og:description" content="A description of my first post."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><link rel="stylesheet" href="../../../styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Mobile Application Development for the iOS Platform"/></head><body><header><div class="wrapper"><a class="site-name" href="/">Mobile Application Development for the iOS Platform</a><nav><ul><li><a href="/epp_605_687_fall_2022/posts/Intro/About Me">AboutMe</a></li><li><a href="/epp_605_687_fall_2022/posts/Intro/Example App">ExampleApp</a></li><li><a href="/epp_605_687_fall_2022/posts/Week00/00-Week00Overview">Week0</a></li><li><a href="/epp_605_687_fall_2022/posts/Week01/00-Week01Overview">Week1</a></li><li><a href="/epp_605_687_fall_2022/posts/Week02/00-Week02Overview">Week2</a></li><li><a href="/epp_605_687_fall_2022/posts/Week03/00-Week03Overview">Week3</a></li><li><a href="/epp_605_687_fall_2022/posts/Week04/00-Week04Overview">Week4</a></li><li><a href="/epp_605_687_fall_2022/posts/Week05/00-Week05Overview">Week5</a></li><li><a href="/epp_605_687_fall_2022/posts/Week06/00-Week06Overview">Week6</a></li><li><a href="/epp_605_687_fall_2022/posts/Week07/00-Week07Overview">Week7</a></li><li><a href="/epp_605_687_fall_2022/posts/Week08/00-Week08Overview">Week8</a></li><li><a href="/epp_605_687_fall_2022/posts/Week09/00-Week09Overview">Week9</a></li><li><a href="/epp_605_687_fall_2022/posts/Week10/00-Week10Overview">Week10</a></li><li><a href="/epp_605_687_fall_2022/posts/Week11/00-Week11Overview">Week11</a></li><li><a href="/epp_605_687_fall_2022/posts/Week12/00-Week12Overview">Week12</a></li><li><a href="/epp_605_687_fall_2022/posts/Week13/00-Week13Overview">Week13</a></li><li><a href="/epp_605_687_fall_2022/posts/Week14/00-Week14Overview">Week14</a></li></ul></nav></div></header><div class="wrapper"><h1>Week 4 - Grand Central Dispatch</h1><p style="float: left">Previous:  <A HREF="../04-NetworkingExample/index.html">Networking Example</A></p><p style="float: right">Next:  <A HREF="../06-OperationQueues/index.html" class="nextModule">Operation Queues</A></p><BR/><BR/><h2>Overview</h2><center> <iframe width="1280" height="720" src="https://cdnapisec.kaltura.com/html5/html5lib/v2.81.2/mwEmbedFrame.php/p/1458241/uiconf_id/14487351/entry_id/1_b2u0s50h?wid=_1458241&iframeembed=true&playerId=kaltura_player&entry_id=1_b2u0s50h&flashvars[localizationCode]=en&amp;flashvars[leadWithHTML5]=true&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[mediaProxy.preferedFlavorBR]=2500&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;flashvars[EmbedPlayer.NotPlayableDownloadLink]=true;&wid=1_abkvs1gz"allowfullscreen webkitallowfullscreen mozAllowFullScreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player">
  </iframe>
</center><p>In this module you'll learn about Apple’s approach to dealing with using multiple threads in your application in a performant and scalable way, using either dispatch queues, via Grand Central Dispatch, or NSOperationQueues.</p><h2>Managing Tasks on the Processor</h2><p>Modern day hardware continues to evolve at a breakneck pace. Not only do modern processor run at incredibly fast speeds, they also are comprised of multiple cores, which can each process data independently from the other cores on the chip. The more cores you have, the more threads - or programs - you can run at once. However, most of these threads are small and short lived - they usually wake up to perform a quick task, and then go back to sleep. You may have 10s or 100s of these running on your system at any time - so we need to run them, but run them efficiently. The only problem is, threaded code doesn’t work well with an arbitrary number of cores in the system! So not only does our way of dealing with threads need to be efficient, it needs to be smart in terms of knowing the available resources on the system</p><p>To help solve this problem, Apple invented Grand Central Dispatch. It’s an asynchronous design approach to dealing with concurrency - executing threads at the same time, across our processor cores. Asynchronous operations start a task on a thread, and return immediately to the caller. When the task completes, the original caller is notified. Grand Central Dispatch, or GCD for short, handles the thread creation, management and communication for you, in a nice, developer friendly API</p><p>GCD uses dispatch queues to get things done under the hood.</p><ul><li>They can run serially - in order - or concurrently - at the same time.</li><li>They are a First in First Out structure - a FIFO - meaning that the order in which the tasks are queued up are the order in which they are executed.</li><li>Dispatch queues have a simple API, handle thread management automatically, are fast, memory efficient, and most importantly, they SCALE!</li></ul><h2>Work Items</h2><p>Dispatch queues work on blocks of code called Work Items. They can be written with the queue creation (in the form of a closure), or can get assigned to a variable, assigned to the queue, and reused later on. Execution of work items can happen 2 ways - synchronously, which means that the app doesn’t exit the code block until it complete, or asynchronously, where the work item is invoked, and control is returned to the app immediately.<br><br>Here’s an example of a very simple DispatchWorkItem. It simply takes the variable “value” and increases it by 5. You can either execute that work item by calling the perform method on it, or you can grab another queue - for example, the global queue in this case - and execute the work item asynchronously on that queue. Since it is asynchronous, the work will get sent to a background thread and the main thread will continue working, which is important! You'll learn a bit more about queues below.</p><img src="../../../week04/WorkItem.jpeg#centerResizedSlide" alt="A Work Item"/><p></p><h3>IMPORTANT: Updating the User Interface</h3><p class="info">One thing to keep in mind when performing tasks on background threads is that UI rendering and interaction always occurs on the main queue.  This is a primary reason for sending long running or processor consuming tasks to another thread - you don’t want it to interfere with the smooth operation of your app.  If you need to update the UI in response to something that has happened on your background thread, however, you SHOULD NOT perform that action on the background thread.  Instead, dispatch that action back to the main queue for processing.</p><pre><code><span class="type">DispatchQueue</span>.<span class="property">main</span>{ <span class="comment">//update the UI here!   }</span>
</code></pre><p style="float: left">Previous:  <A HREF="../04-NetworkingExample/index.html">Networking Example</A></p><p style="float: right">Next:  <A HREF="../06-OperationQueues/index.html" class="nextModule">Operation Queues</A></p></div><footer><p>Generated with ❤️ using <a href="https://github.com/johnsundell/publish">Publish</a></p><p>© 2023-2024 Josh Steele (rsteele3@jhu.edu) <a href="mailto:"(rsteele3@jhu.edu)""></a></p><p>Last updated August 25, 2023 at 7:13 PM</p><p><a href="https://mastodon.social/@hococoder" target="_blank">My Mastodon</a> | <a href="https://github.com/hococoder" target="_blank">My GitHub</a> | <a href="https://ep.jhu.edu" target="_blank">Whiting School EPP</a> | <a href="https://canvas.jhu.edu" target="_blank">JHU Canvas</a></p></footer></body></html>