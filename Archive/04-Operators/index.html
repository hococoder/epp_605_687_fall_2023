<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Mobile Application Development for the iOS Platform"/><link rel="canonical" href="https://hococoder.com/Archive/04-Operators"/><meta name="twitter:url" content="https://hococoder.com/Archive/04-Operators"/><meta name="og:url" content="https://hococoder.com/Archive/04-Operators"/><title>Week 2 - Combine Operators | Mobile Application Development for the iOS Platform</title><meta name="twitter:title" content="Week 2 - Combine Operators | Mobile Application Development for the iOS Platform"/><meta name="og:title" content="Week 2 - Combine Operators | Mobile Application Development for the iOS Platform"/><meta name="description" content="An introduction to the Combine framework."/><meta name="twitter:description" content="An introduction to the Combine framework."/><meta name="og:description" content="An introduction to the Combine framework."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><link rel="stylesheet" href="../../../styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Mobile Application Development for the iOS Platform"/></head><body><header><div class="wrapper"><a class="site-name" href="/">Mobile Application Development for the iOS Platform</a><nav><ul><li><a href="/epp_605_687_fall_2022/posts/Intro/About Me">AboutMe</a></li><li><a href="/epp_605_687_fall_2022/posts/Intro/Example App">ExampleApp</a></li><li><a href="/epp_605_687_fall_2022/posts/Week00/00-Week00Overview">Week0</a></li><li><a href="/epp_605_687_fall_2022/posts/Week01/00-Week01Overview">Week1</a></li><li><a href="/epp_605_687_fall_2022/posts/Week02/00-Week02Overview">Week2</a></li><li><a href="/epp_605_687_fall_2022/posts/Week03/00-Week03Overview">Week3</a></li><li><a href="/epp_605_687_fall_2022/posts/Week04/00-Week04Overview">Week4</a></li><li><a href="/epp_605_687_fall_2022/posts/Week05/00-Week05Overview">Week5</a></li><li><a href="/epp_605_687_fall_2022/posts/Week06/00-Week06Overview">Week6</a></li><li><a href="/epp_605_687_fall_2022/posts/Week07/00-Week07Overview">Week7</a></li><li><a href="/epp_605_687_fall_2022/posts/Week08/00-Week08Overview">Week8</a></li><li><a href="/epp_605_687_fall_2022/posts/Week09/00-Week09Overview">Week9</a></li><li><a href="/epp_605_687_fall_2022/posts/Week10/00-Week10Overview">Week10</a></li><li><a href="/epp_605_687_fall_2022/posts/Week11/00-Week11Overview">Week11</a></li><li><a href="/epp_605_687_fall_2022/posts/Week12/00-Week12Overview">Week12</a></li><li><a href="/epp_605_687_fall_2022/posts/Week13/00-Week13Overview">Week13</a></li><li><a href="/epp_605_687_fall_2022/posts/Week14/00-Week14Overview">Week14</a></li></ul></nav></div></header><div class="wrapper"><h1>Week 2 - Combine Operators</h1><p style="float: left">Previous:  <A HREF="../03-Subscribers/index.html">Combine Subscribers</A></p><p style="float: right">Next:  <A HREF="../05-CombineInPractice/index.html" class="nextModule">Combine in Practice</A></p><BR/><BR/><h2>Operators</h2><center> <iframe width="1280" height="720" src="https://cdnapisec.kaltura.com/html5/html5lib/v2.81.2/mwEmbedFrame.php/p/1458241/uiconf_id/14487351/entry_id/1_17myo9gy?wid=_1458241&iframeembed=true&playerId=kaltura_player&entry_id=1_17myo9gy&flashvars[localizationCode]=en&amp;flashvars[leadWithHTML5]=true&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[mediaProxy.preferedFlavorBR]=2500&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;flashvars[EmbedPlayer.NotPlayableDownloadLink]=true;&wid=1_abkvs1gz"allowfullscreen webkitallowfullscreen mozAllowFullScreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player">
  </iframe>
</center><p>In the middle you may or may not have Operators. As you can see in the figure below, they act as both subscribers and publishers, so they can take data from a publisher, manipulate it, and pass it on to a subscriber. You can also chain multiple operators together to perform complex manipulations of data. You might also notice that the types on either side of an operator can be different - which as fine as long as what they are hooking up to matches up (meaning the publisher's output types must match the operator's input types, and the operator's output types must match the subscriber's input types). Combine has many built in operators that take in closures so you can define your own logic for what happens inside the operator.</p><img src="../../../week02/Combine2.png#centerResizedSlide" alt="Combine Block Diagram"/><p>Ok now with that out of the way, let's look at an example!</p><h2>Example</h2><center> <iframe width="1280" height="720" src="https://cdnapisec.kaltura.com/html5/html5lib/v2.81.2/mwEmbedFrame.php/p/1458241/uiconf_id/14487351/entry_id/1_fayj0fks?wid=_1458241&iframeembed=true&playerId=kaltura_player&entry_id=1_fayj0fks&flashvars[localizationCode]=en&amp;flashvars[leadWithHTML5]=true&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[mediaProxy.preferedFlavorBR]=2500&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;flashvars[EmbedPlayer.NotPlayableDownloadLink]=true;&wid=1_abkvs1gz"allowfullscreen webkitallowfullscreen mozAllowFullScreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player">
  </iframe>
</center><p>Let's make a really quick and easy example demonstrating the concepts we just talked about. I've got a playground open with an array of numbers define in the constant "values". Let's define a <code>Just</code> publisher to publish that array to any subscribers that want it.</p><pre><code><span class="keyword">let</span> values = [<span class="number">1</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">10</span>, <span class="number">14</span>, <span class="number">15</span>]
<span class="keyword">let</span> publisher = <span class="type">Just</span>(values)
</code></pre><p>That's pretty straightforward - it will just send that value out when a subscriber asks for it. Following our water in the hose example we can add some operators between the publisher and the subscriber to modify the values on the way. Let's map the array to an array of squared values, using the map operator, which we'll append to the previous <code>Just</code> declaration (the full call will be assembled at the end of the example)</p><pre><code>   .<span class="call">map</span> { values <span class="keyword">in</span> 
  
      values.<span class="call">map</span> { $0 * $0 } 
    
   }
</code></pre><p>This actually does a few things. It subscribes to the values array from the publisher and returns an array of squared values via the array's usual <code>map</code> method (which it gets because it is a collection in Swift). That returned value acts as the publisher on the right hand side of the operator, allowing subscribers to subscribe to it.</p><p>Another operator we can use is the print operator, which allows you to see the progress of the Combine pipeline. We can preamble the debug message with some text of our own like this:</p><pre><code>   .<span class="call">print</span>(<span class="string">"Example Debug: "</span>)
</code></pre><p>We'll see what this does when we hook up a final subscriber and run the pipeline later on.</p><p>One more operator example - we can perform a check on the incoming values by using the <code>allSatisfy</code> operator. This operator takes in the values, and provides a closure where you can check that the values satisfy a condition you specify. Here, we'll check that all the values in the array are less than 200, using the array's built in <code>allSatisfy</code> method. What you do in this closure will vary based on the data types coming into the operator. For this operator, the data type being sent through the pipeline goes through a change - it comes in as an array of integers and comes out the other side as a boolean, which is the return type for the <code>allSatisfy</code> method.</p><pre><code>   .<span class="call">allSatisfy</span> { values <span class="keyword">in</span>

      values.<span class="property">allSatisfy</span>{ $0 &lt; <span class="number">200</span> }
      
   }
</code></pre><p>Now with that in place, let's attach a sink subscriber so the publisher will activate and send data through the pipeline. Remember that the output of the allSatisfy operator is a boolean, so that is what the sink ends up receiving:</p><pre><code>   .<span class="call">sink</span> { receivedValue <span class="keyword">in</span>

      <span class="call">print</span>(<span class="string">"Satisfy condition is</span> \(receivedValue)<span class="string">"</span>)

    }
</code></pre><p><em>Combining</em> that all together, the example looks like this:</p><pre><code>     <span class="keyword">let</span> publisher = <span class="type">Just</span>(values)
      .<span class="call">map</span> { values <span class="keyword">in</span>
          values.<span class="call">map</span> { $0 * $0 }
      }
      .<span class="call">print</span>(<span class="string">"Example Debug: "</span>)
      .<span class="call">allSatisfy</span> { values <span class="keyword">in</span>
          values.<span class="property">allSatisfy</span>{ $0 &lt; <span class="number">200</span> }
      }
      .<span class="call">sink</span> { receivedValue <span class="keyword">in</span>
          <span class="call">print</span>(<span class="string">"Satisfy condition is</span> \(receivedValue)<span class="string">"</span>)
      }
</code></pre><p>If you run the playground now, you'll see that the print statement shows you some of the steps along the pipeline, and the final print statement in the sink is also shown in the console.</p><p>So even though we started with an array of doubles, the final value received by the sink subscriber was a boolean, since the operators that sat in between the initial publisher and the subscriber changed the data being transmitted along the pipeline.</p><p>In the next module, we'll take a look at how you can use Combine in practice.</p><p style="float: left">Previous:  <A HREF="../03-Subscribers/index.html">Combine Subscribers</A></p><p style="float: right">Next:  <A HREF="../05-CombineInPractice/index.html" class="nextModule">Combine in Practice</A></p><BR/><BR/></div><footer><p>Generated with ❤️ using <a href="https://github.com/johnsundell/publish">Publish</a></p><p>© 2023-2024 Josh Steele (rsteele3@jhu.edu) <a href="mailto:"(rsteele3@jhu.edu)""></a></p><p>Last updated August 25, 2023 at 7:13 PM</p><p><a href="https://mastodon.social/@hococoder" target="_blank">My Mastodon</a> | <a href="https://github.com/hococoder" target="_blank">My GitHub</a> | <a href="https://ep.jhu.edu" target="_blank">Whiting School EPP</a> | <a href="https://canvas.jhu.edu" target="_blank">JHU Canvas</a></p></footer></body></html>